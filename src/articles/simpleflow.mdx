import coverImage from "../assets/simpleflow/cover.png";
import statImage from "../assets/simpleflow/stat.png";
import clipboardInsImage from "../assets/simpleflow/inspector.png";

export const metadata = {
  title: "How Simpleflow was built?",
  slug: "simpleflow",
  description: "A behind-the-scenes look at building simpleflow",
  publishDate: "2025-11-01",
  tags: [],
};

# How Simpleflow was built?

A behind-the-scenes look at building Simpleflow

<img src={coverImage} alt="Simpleflow cover" />

---

Most of us draw diagrams — flowcharts, user journeys, system maps — just to make sense of how things work. Boxes and arrows are the visual glue that help us see connections between ideas.

Back then, I’d watch designers bounce between tools, sketching out flows and connectors, only to rebuild everything again inside Figma. Or worse, take a screenshot and drop it in as an image. It never felt right. The connectors looked off, and any time something changed, you had to start over.

Then in **2019**, [Figma opened its plugin API](https://www.figma.com/community/plugins). That suddenly made it possible for anyone to fix their own small frustrations. I thought: _what if drawing connectors inside Figma could be as easy as drawing shapes?_ What started as a small weekend experiment slowly turned into a long-term puzzle I couldn’t stop thinking about. That idea grew into [**SimpleFlow**](https://www.figma.com/community/plugin/751821593330638172/simpleflow-figjam-connectors-everywhere).

---

## 2019–2022 · Figuring Out Connectors

The first versions of SimpleFlow were built around one simple goal: **draw connectors that look tidy and don’t cut through everything.**

It sounded straightforward, but routing lines between moving boxes turned out to be a deep problem. What counts as a “good” route? How do you avoid tangled paths or weird overlaps? And what happens when frames start nesting or auto-layout gets involved?

I spent months writing rule-based routing: check positions, test collisions, bend lines at ninety degrees, repeat. If I’d seen [this article](https://medium.com/swlh/routing-orthogonal-diagram-connectors-in-javascript-191dc2c5ff70) earlier, it would’ve saved a lot of time — it covers most of those edge cases neatly.

Then in **April 2021**, [FigJam launched](https://www.figma.com/figjam/). Seeing its live connectors in action was a delightful moment: they moved smoothly, updated in real time, and solved exactly the kind of problem I’d been wrestling with. It was a great reference for what a “good” solution could look like.

At that point, Figma’s API only supported connectors inside FigJam, but not in Figma Design. There was a `createConnector()` method, but it [didn’t work outside that environment](https://developers.figma.com/docs/plugins/api/properties/figma-createconnector/). I tried a few experiments, but none felt natural or reliable. So I decided to step back and pause the project, hoping one day the API might open up to design files too.

---

## 2023 · One Button, Big Turning Point

In **January 2023**, a [tweet from Danny Postmaa](https://x.com/dannypostmaa/status/1612345747495874561) mentioned [Figcomponents.com](https://www.figcomponents.com/) — a site that let you copy UI components from the web and paste them straight into Figma. That immediately clicked for me: if the browser could paste components, then the same pathway might also paste FigJam connectors.

With that in mind, I simplified SimpleFlow into a single idea: **Copy Connector → Paste → Done.** No settings, no color pickers, no dropdowns — just one simple action that worked.

Long story short, after launch the plugin’s usage grew **more than 10x in six months**. You might be wondering: _how did you make it?_ To make it work I had to dig into how the browser writes data to the clipboard and how Figma reads it back on paste.

<img src={statImage} alt="Simpleflow stat 22-23" />

---

## Opening the Clipboard

You might think — just write the connector data to the clipboard. I’d already saved a static file in the plugin; the real question was **what exactly should go in it**.

When I tried pasting into Apple Notes, nothing showed up, which told me I wasn’t writing the right thing. Using [Evercoder’s Clipboard Inspector](https://github.com/evercoder/clipboard-inspector) I could finally see all clipboard formats, and that’s where it clicked: Figma isn’t using plain text, it’s writing **rich `text/html`** with two special attributes — `data-metadata` and `data-buffer`.

<img src={clipboardInsImage} alt="Inspector" />

```html
<meta charset="utf-8" />
<div>
  <span data-metadata="<!--(figmeta)eyJm[...]9Cg==(/figmeta)-->"></span>
  <span data-buffer="<!--(figma)ZmlnLW[...]ff/AA==(/figma)-->"></span>
</div>
<span style="white-space:pre-wrap;">Text</span>
```

`data-metadata` starts with **eyJ**, which gives away that it’s Base64-encoded JSON; decoding with `JSON.parse(atob(...))` yields something like:

```JSON
{
  "fileKey": "4XvKUK38NtRPZASgUJiZ87",
  "pasteID": 1261442360,
  "dataType": "scene"
}
```

The real payload lives inside `data-buffer`. Base64-decoding that produces a binary blob starting with `fig-kiwi`. I learned about this from [Alex Harri’s excellent deep dive](https://alexharri.com/blog/clipboard) on the Clipboard API, which explains not just how clipboard formats work in browsers, but also how Figma encodes its own data.

That fig-kiwi string turned out to be Figma’s internal Kiwi format (created by co-founder & former CTO Evan Wallace) the same schema used to encode `.fig` files. So what I needed to store wasn’t just vector data; it was a tiny .fig file encoded into the clipboard’s HTML.

---

## Decode fig-kiwi

That means every time you copy something in Figma, here’s what actually happens:

1. Figma packages the selected element as a **tiny `.fig` file**.
2. It encodes that file in Base64.
3. It embeds the encoded data inside HTML comments, like `<!--(figma)…(/figma)-->`.
4. It writes the resulting HTML snippet to your clipboard as `text/html`.

You can even test this yourself: Decode the Base64 string from `data-buffer`, save it as `sample.fig`, and upload it to [Evan Wallace’s .fig parser](https://madebyevan.com/figma/fig-file-parser/). You’ll see a miniature Figma file — complete with nodes, layers, and styles — representing exactly what you copied.

This design makes cross-app copy-and-paste possible. By using common clipboard types such as `text/html`, browsers can map clipboard data to native OS formats (`CF_HTML` on Windows, `NSPasteboard.PasteboardType.html` on macOS). That’s why you can copy from Figma in the browser and paste seamlessly into the desktop app.

---

## Decoding, Tweaking, Re-encoding

Once I realized I was working with actual `.fig` files, the next step became clear.

1. **Decode** the `data-buffer` Base64 string into binary, then parse it with the `.fig` parser to get structured data.
2. **Modify** what I cared about — color, label, connector direction, stroke width, or any other properties.
3. **Re-encode** the updated file back into binary, then into Base64.
4. **Write** the result back to the clipboard as `text/html`.
5. **Let users paste** it directly into Figma.

Getting clipboard writes to work inside Figma’s plugin sandbox was another challenge. Some clipboard APIs are deprecated, and the behavior can be unreliable between browser versions. This [community thread](https://forum.figma.com/ask-the-community-7/write-to-clipboard-from-custom-plugin-23974) became my main reference. After a fair amount of trial and error, I found a setup that worked reliably enough.

That’s how SimpleFlow’s **“Copy Connector”** button actually functions — it generates the right Figma-encoded HTML snippet and lets Figma handle the paste natively.

---

## 2024 · When Figma Closed the API Door

Around mid-2024, Figma tightened its API, and a lot of plugins suddenly stopped working. Developers began seeing errors like this:

```plaintext title="error.log"
Error: in clone: Cloning CONNECTOR nodes is not supported in the current editor
```

A discussion on the [Figma Forum](https://forum.figma.com/ask-the-community-7/has-figma-changed-or-restricted-its-clone-function-api-43505) explained why.

> “The CONNECTOR node type is specific to FigJam and should never have been allowed by the API in Figma Design…  
> The API has now been updated to enforce this consistently.”  
> — **ksn, Figma Community Support**

That meant no more `createConnector()` calls, no more `clone()` workarounds — FigJam connectors were officially off-limits in Figma Design.

Many popular plugins, including _Autoflow_ and _FlowConnect_, broke overnight. SimpleFlow, however, kept working. By that point, it didn’t rely on the API at all. Everything ran through the clipboard, and Figma still allows pasting — even if programmatic creation is blocked.

That small difference — _pasting_ instead of _creating_ — turned out to be what kept SimpleFlow alive.

---

## Looking Back

SimpleFlow began as a geometry problem and turned into a story about curiosity. Along the way, I learned a few things:

- Every copy in Figma is literally a tiny `.fig` file.
- Understanding clipboard formats can sometimes be more powerful than private APIs.
- Simplicity scales — one well-designed button can go a long way.

After five years, the plugin still does almost nothing. But it works every single day, quietly — and that feels right.

Sometimes the best side projects aren’t the ones that make the most noise, but the ones that survive through every API change because you kept following a weird string that started with `fig-kiwi/`.

---

## References

- [SimpleFlow Plugin](https://www.figma.com/community/plugin/751821593330638172/simpleflow-figjam-connectors-everywhere)
- [Routing Orthogonal Connectors in JavaScript](https://medium.com/swlh/routing-orthogonal-diagram-connectors-in-javascript-191dc2c5ff70)
- [Figma createConnector() API Docs](https://developers.figma.com/docs/plugins/api/properties/figma-createconnector/)
- [Figcomponents](https://www.figcomponents.com/)
- [Danny Postmaa’s Tweet](https://x.com/dannypostmaa/status/1612345747495874561)
- [Evercoder’s Clipboard Inspector](https://github.com/evercoder/clipboard-inspector)
- [Community Thread: Write to Clipboard from Plugin](https://forum.figma.com/ask-the-community-7/write-to-clipboard-from-custom-plugin-23974)
- [Forum Thread: Connector Clone Restriction](https://forum.figma.com/ask-the-community-7/has-figma-changed-or-restricted-its-clone-function-api-43505)
- [Evan Wallace’s .fig Parser](https://madebyevan.com/figma/fig-file-parser/)
